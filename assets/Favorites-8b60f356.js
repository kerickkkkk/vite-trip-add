import{a as h}from"./axios-a900fd7e.js";import{i as x,r as y,o as $,a as w,b as c,c as n,g as d,d as e,F as m,j as B,e as v,w as g,t as k}from"./index-487cc24a.js";const E={class:"container"},F={class:"row"},C={class:"card"},N=["src"],S={class:"card-body"},T={class:"d-flex"},V={class:"card-title"},j=["onClick"],z={class:"card-text"},L={__name:"Favorites",setup(A){const r="https://ttshop-server.onrender.com",_=x("$swal"),{user:b,token:u}=localStorage.getItem("ttshop")?JSON.parse(localStorage.getItem("ttshop")):{},i=y([]),p=()=>{h({method:"GET",url:`${r}/600/users/${b.id}/likes?_expand=product`,headers:{Authorization:`Bearer ${u}`}}).then(({data:s})=>{i.value=s}).catch(s=>{var o;console.dir(s),_((o=s==null?void 0:s.response)==null?void 0:o.data)})},f=s=>{const o="DELETE",a=`${r}/600/likes/${s}`;h({method:o,url:a,headers:{Authorization:`Bearer ${u}`}}).then(t=>{p()}).catch(t=>{var l;console.dir(t),_((l=t==null?void 0:t.response)==null?void 0:l.data)})};return $(()=>{p()}),(s,o)=>{const a=w("router-link");return c(),n("div",null,[d(" 我的最愛 "),e("div",E,[e("div",F,[i.value.length>0?(c(!0),n(m,{key:0},B(i.value,t=>(c(),n("div",{key:t.id,class:"col-4"},[e("div",C,[e("img",{src:t.product.imageUrl,class:"card-img-top"},null,8,N),e("div",S,[e("div",T,[e("h5",V,k(t.product.title),1),e("button",{onClick:l=>f(t.id),class:"btn btn-outline-primary"}," 取消最愛 ",8,j)]),e("p",z,k(t.product.content),1),v(a,{to:"/products",class:"btn btn-primary"},{default:g(()=>[d("返回景點列表")]),_:1})])])]))),128)):(c(),n(m,{key:1},[d(" 沒有產品列表 "),v(a,{to:"/products",class:"btn btn-primary"},{default:g(()=>[d("返回景點列表")]),_:1})],64))])])])}}};export{L as default};
