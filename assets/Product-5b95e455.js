import{h as x,l as B,r as v,o as I,a as N,b as l,c as d,g as r,d as s,e as f,t as k,k as C,f as E,w as V}from"./index-1a7dbddd.js";import{a as h}from"./axios-a900fd7e.js";import{_ as P}from"./Image-55645742.js";const S={class:"container"},T={class:"card mb-3"},U={class:"row g-0"},z={class:"col-md-4"},A={class:"col-md-8"},D={class:"card-body"},F={class:"card-body__header d-flex justify-content-between aligin-items-center"},j={class:"card-title"},L={key:0},M={key:1},O={class:"card-text"},J={__name:"Product",setup(R){const g=x(),$=B(),{user:i,token:m}=g,c="https://ttshop-server.onrender.com",u=$.params.id,n=v([]),o=v(null),b=()=>{h.get(`${c}/products/${u}`).then(({data:t})=>{n.value=t}).catch(t=>{var e;console.dir(t),swal((e=t==null?void 0:t.response)==null?void 0:e.data)})},y=()=>{h({method:"get",url:`${c}/600/users/${i.id}/likes?productId=${u}`,headers:{Authorization:`Bearer ${m}`}}).then(({data:t})=>{o.value=t.length>0?t[0].id:null}).catch(t=>{var e;console.dir(t),swal((e=t==null?void 0:t.response)==null?void 0:e.data)})},w=()=>{const t=o.value===null?"POST":"DELETE",e=o.value===null?`${c}/600/likes/`:`${c}/600/likes/${o.value}`,_=o.value===null?{userId:i.id,productId:u}:{};h({method:t,url:e,data:_,headers:{Authorization:`Bearer ${m}`}}).then(({data:a})=>{o.value=a.id?a.id:null}).catch(a=>{var p;console.dir(a),swal((p=a==null?void 0:a.response)==null?void 0:p.data)})};return I(()=>{b(),y()}),(t,e)=>{const _=N("router-link");return l(),d("div",null,[r(" 景點詳細 "),s("div",S,[s("div",T,[s("div",U,[s("div",z,[f(P,{src:n.value.imageUrl,className:"img-fluid rounded-start",alt:n.value.title},null,8,["src","alt"])]),s("div",A,[s("div",D,[s("div",F,[s("h5",j,k(n.value.title),1),C(i)?(l(),d("button",{key:0,onClick:w,class:"btn btn-sm btn-outline-primary"},[o.value?(l(),d("span",L,"取消")):(l(),d("span",M,"加入")),r(" 最愛 ")])):E("",!0)]),s("p",O,k(n.value.content),1),f(_,{to:"/products"},{default:V(()=>[r(" 返回列表 ")]),_:1})])])])])])])}}};export{J as default};
