import{a as h}from"./axios-a900fd7e.js";import{i as x,f as y,g as $,r as w,o as c,c as n,e as i,a as e,F as v,h as B,b as m,w as k,t as g}from"./index-b3e54e60.js";const E={class:"container"},F={class:"row"},C={class:"card"},N=["src"],S={class:"card-body"},T={class:"d-flex"},V={class:"card-title"},z=["onClick"],A={class:"card-text"},j={__name:"Favorites",setup(D){const r="https://ttshop-server.onrender.com",_=x("$swal"),{user:b,token:u}=JSON.parse(localStorage.getItem("ttshop")),l=y([]),p=()=>{h({method:"GET",url:`${r}/600/users/${b.id}/likes?_expand=product`,headers:{Authorization:`Bearer ${u}`}}).then(({data:s})=>{l.value=s,console.log(s)}).catch(s=>{var o;console.dir(s),_((o=s==null?void 0:s.response)==null?void 0:o.data)})},f=s=>{const o="DELETE",a=`${r}/600/likes/${s}`;h({method:o,url:a,headers:{Authorization:`Bearer ${u}`}}).then(t=>{p()}).catch(t=>{var d;console.dir(t),_((d=t==null?void 0:t.response)==null?void 0:d.data)})};return $(()=>{p()}),(s,o)=>{const a=w("router-link");return c(),n("div",null,[i(" 我的最愛 "),e("div",E,[e("div",F,[l.value.length>0?(c(!0),n(v,{key:0},B(l.value,t=>(c(),n("div",{key:t.id,class:"col-4"},[e("div",C,[e("img",{src:t.product.imageUrl,class:"card-img-top"},null,8,N),e("div",S,[e("div",T,[e("h5",V,g(t.product.title),1),e("button",{onClick:d=>f(t.id),class:"btn btn-outline-primary"}," 取消最愛 ",8,z)]),e("p",A,g(t.product.content),1),m(a,{to:"/products",class:"btn btn-primary"},{default:k(()=>[i("返回景點列表")]),_:1})])])]))),128)):(c(),n(v,{key:1},[i(" 沒有產品列表 "),m(a,{to:"/products",class:"btn btn-primary"},{default:k(()=>[i("返回景點列表")]),_:1})],64))])])])}}};export{j as default};
